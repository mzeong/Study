### 스코프

Node.js는 다른 웹 프레임워크와는 다르게, 멀티 스레드 상태 비저장 모델을 따르지 않는다. 따라서 싱글턴 인스턴스를 사용하는 것이 안전한 방식이다. 이는 요청으로 들어오는 모든 정보(DB 커넥션 풀, 전역 싱글턴 서비스 등)들을 공유할 수 있다는 것을 의미한다. 
하지만 GraphQL 애플리케이션의 요청별 캐싱을 한다거나 요청을 추적하거나 또는 <ins>멀티테넌시</ins>를 지원하기 위해서는 요청 기반으로 생명주기를 제한해야 한다.
- multitenancy: 하나의 애플리케이션 인스턴스가 여러 사용자에게 각각 다르게 동작하도록 하는 SW 아키텍처

컨트롤러와 프로바이더에 <ins>스코프 옵션을 주어</ins> 생명주기를 지정하는 방법이 있다. 스코프에는 DEFAULT, REQUEST, TRANSIENT가 있다.

- 가능하면 DEFAULT 스코프를 사용하는 것을 권장한다. 싱글턴 인스턴스를 공유한다는 것은 인스턴스를 캐시할 수 있고, 초기화가 애플리케이션 시작 중에 한 번만 발생하므로 메모리와 동작 성능을 향상할 수 있다. 

<br>

### 스코프 계층
- 컴포넌트가 가질 수 있는 스코프의 범위 

스코프는 컨트롤러와 프로바이더에 선언할 수 있는데 만약 연관된 컴포넌트들이 서로 다른 스코프를 가지게 된다면, 즉속성을 가진 컴포넌트의 스코프를 따라가게 된다. 

<br>

### 참고

NestJS로 배우는 백엔드 프로그래밍
