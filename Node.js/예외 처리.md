### 예외 처리하기

- 예외는 노드 프로세스/스레드를 멈춤
- 노드는 기본적으로 싱글 스레드라 스레드가 멈춘다는 것은 프로세스가 멈추는 것 (에러 처리는 필수!) 

기본적으로 에러가 발생할 만한 곳을 try-catch문으로 감싼다. 
- 노드 비동기 메서드의 에러는 따로 처리하지 않아도 된다. (콜백 함수에서 에러 객체 제공)
- 프로미스의 에러는 따로 처리하지 않아도 된다. (버전이 올라가면 동작이 바뀔 수 있음)

예측이 불가능한 에러는 `uncaughtException` 이벤트 리스너를 달아 처리한다. 처리하지 못한 에러가 발생했을 때 이벤트 리스너가 실행되고 프로세스가 유지된다. 

```javascript
process.on('uncaughtException', (err) => {
	console.error('예기치 못한 에러', err);
});
```

> `uncaughtException` 이벤트 리스너로 모든 에러를 처리할 수 있을 것처럼 보인다. 하지만 노드 공식 문서에서는 `uncaughtException` 이벤트를 최후의 수단으로 사용할 것을 명시하고 있다. <br>
> 노드는 `uncaughException` 이벤트 발생 후 다음 동작이 제대로 동작하는지를 보증하지 않는다. 따라서 복구 작업 코드를 넣어두는 것은 부적합하고, 단순 에러 내용 기록 정도로 사용하는 것이 좋다. 

<br>

### 참고

Node.js 교과서 - 기본부터 프로젝트 실습까지
